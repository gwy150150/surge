let raw = $server.name || ''

// æå–å›½æ——ï¼ˆåŒ…æ‹¬å›½æ—— emoji æˆ– ğŸ´â€â˜ ï¸ï¼‰
let flagMatch = raw.match(/([\uD83C][\uDDE6-\uDDFF]){2}|ğŸ´â€â˜ ï¸/)
let flag = flagMatch ? flagMatch[0] : ''

// æå–å›½æ——åçš„ å›½å®¶ä»£ç ï¼ˆå¯é€‰ï¼‰+ å›½å®¶åç§°ï¼ˆä¸­è‹±æ–‡ï¼‰
let code = ''
let countryName = ''
let codeNameMatch = raw.match(/(?:([\uD83C][\uDDE6-\uDDFF]){2}|ğŸ´â€â˜ ï¸)[^\w\u4e00-\u9fa5]*([A-Z]{2})?\s*([\u4e00-\u9fa5\w]+)/)

if (codeNameMatch) {
  code = codeNameMatch[2] || ''      // å¯èƒ½ä¸ºç©º
  countryName = codeNameMatch[3] || ''
}

// æå–ä¸­é—´æ®µï¼šCNå¼€å¤´çš„å…¬å¸åç§°
let chinaMatch = raw.match(/- (CN [^-]+) -/)
let chinaCompany = chinaMatch ? chinaMatch[1].trim() : ''

// æå–é¦–æ®µï¼šå¤–å›½å…¬å¸åç§°
let foreignMatch = raw.match(/^([^-]+) -/)
let foreignCompany = foreignMatch ? foreignMatch[1].trim() : ''

// æ‹¼æ¥è¾“å‡ºæ ¼å¼ï¼šå›½æ——+å›½å®¶ä»£ç +å›½å®¶å+CNæ®µ+å›½å¤–å…¬å¸æ®µ
$server.name = ${flag} ${code ? code + ' ' : ''}${countryName} ${chinaCompany} ${foreignCompany}
